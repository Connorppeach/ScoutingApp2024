<!DOCTYPE html>
<html>
<head>
  <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA==" crossorigin="anonymous"></script> -->
<link rel="stylesheet" type="text/css" href="./src/style.css" />
<script type="text/javascript" src="/src/utils.js"></script>


</head>

<body>
<div class="topnav">
  <a  href="/">Dashboard</a>
  <a href="/data">Data</a>
  <a href="/matchscout">Match Scouting</a>
  <a href="/pitscout">Pit Scouting</a>
  <a class="active" href="/fileupload">File Upload</a>
  <a href="/qrscan">File Download</a>
  <a href="/tba">TBA</a>
</div>

<select id="matchdropdown" onchange="listFileOfMatch()">
  <option disabled selected value> -- select an option -- </option>
</select>
<button id="loadbutton" style="display:none;" onclick="getData()">Load</button>
<table id='table' style="display:none;"></table>

<script>
  matchdropdown = getel('matchdropdown')
  table = getel('table')
  loadbutton = getel('loadbutton')

  onOpen(function(){
    ws.send("getMatches")
  })

  onMessage(function(event){
    if(event.data == ""){return}

    data = event.data.split('§')
    switch(data[0]){
      case "MatchList":
        matches = data[1].split('•')
        line = ""
        for(i=0; i<matches.length;i++){
          line += `<option value="${matches[i]}">${matches[i]}</option>`
        }
        matchdropdown.innerHTML += line
        break;
      case "MatchFileList":
        files = data[2].split('•')
        line = "<tr>"
        line += "<th></th>"
        line += "<th>File</th>"
        line += "</tr>"
        for(i=0;i<files.length;i++){
          line += "<tr>"
          line += "<th><input type='checkbox'></th>"
          line += `<th>${files[i]}</th>`
          line += "</tr>"
        }
        table.innerHTML = line
        table.style.display = ""
        loadbutton.style.display = ""

        break
      default:
        console.log(event.data)
        break;
    }
  })

  function listFileOfMatch(){
    matchdropdown.style.display = "none"
    ws.send("getFilesInMatch§"+matchdropdown.value)
  }

  function getData(){

  }

  function getel(str){return document.getElementById(str)}
  
</script>
    
</body>
</html>
